server {
    listen 80;

    # اسم النطاق أو عنوان الـ IP الخاص بالخادم
    server_name localhost;

    # موقع ملفات HLS
    location /hls/ {
        # تحديد المجلد الذي يحتوي على ملفات HLS (ملفات .m3u8 و .ts)
        root /var/www;

        # إلغاء التخزين المؤقت للملفات وفرض تقديمها بشكل مستمر
        add_header Cache-Control no-cache;
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Headers "Range";

        # دعم طلبات نطاقات متعددة (CORS)
        add_header Access-Control-Allow-Methods "GET, POST, OPTIONS";
        add_header Access-Control-Expose-Headers "Content-Length,Content-Range";

        # التعامل مع طلبات المحتوى الجزئي (Byte-Range)
        open_file_cache max=1000 inactive=20s;
        open_file_cache_valid 30s;
        open_file_cache_min_uses 2;
        open_file_cache_errors off;
    }

    # إعدادات أخرى قد تحتاجها
    location / {
        try_files $uri $uri/ =404;
    }
}
